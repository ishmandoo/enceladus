<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Enceladus</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #000000; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="300" height="300"></canvas>

<img id="box16" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box16.png"></img>
<img id="box15" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box15.png"></img>
<img id="box14" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box14.png"></img>
<img id="box13" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box13.png"></img>
<img id="box12" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box12.png"></img>
<img id="box11" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box11.png"></img>
<img id="box10" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box10.png"></img>
<img id="box9" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box9.png"></img>
<img id="box8" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box8.png"></img>
<img id="box7" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box7.png"></img>
<img id="box6" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box6.png"></img>
<img id="box5" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box5.png"></img>
<img id="box4" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box4.png"></img>
<img id="box3" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box3.png"></img>
<img id="box2" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box2.png"></img>
<img id="box1" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\boxes\\box1.png"></img>

<img id="playerup1" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerup1.png"></img>
<img id="playerdown1" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerdown1.png"></img>
<img id="playerleft1" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerleft1.png"></img>
<img id="playerright1" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerright1.png"></img>

<img id="playerrightburn" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerrightPlaceholderBurn.png"></img>
<img id="playerleftburn" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerleftPlaceholderBurn.png"></img>
<img id="playerupburn" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerupPlaceholderBurn.png"></img>
<img id="playerdownburn" style="display: none;" src="C:\\Users\\Will\\Google Drive\\My Documents\\Enceladus\\Arts\\PlayerSprites\\playerdownPlaceholderBurn.png"></img>


<script>

var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var boxWidth = 18;

var dx = 200;
var dy = 200;

offsets = [
  {x: 0,y:-2},
  {x: 1,y: 0},
  {x: 0,y: 1},
  {x:-2,y: 0}
]

names = [
  'up',
  'right',
  'down',
  'left'
]

function drawCluster(boxes,pos, players){
  iMax = boxes.length;
  jMax = boxes[0].length;
  for(i=0 ; i<iMax ; i++){
    for(j=0 ; j<jMax ; j++){
      if(boxes[i][j] != 0){
        ctx.drawImage(document.getElementById('box' + boxes[i][j]), pos.x + i*boxWidth, pos.y + j*boxWidth);
      }
    }
  }
  players.forEach(function(player){
    if(player.burn == 0){
    ctx.drawImage(document.getElementById("player" + names[player.dir] + "1"), pos.x + boxWidth * (player.pos.x + offsets[player.dir].x), pos.y + boxWidth * (player.pos.y + offsets[player.dir].y))
  } else{
    ctx.drawImage(document.getElementById("player" + names[player.dir] + "burn"), pos.x + boxWidth * (player.pos.x + offsets[player.dir].x), pos.y + boxWidth * (player.pos.y + offsets[player.dir].y))
  }
  })
}


function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  testGrid = [[1,0,0],[1,0,0],[1,1,1]];

  clusterArray = [
    {boxes: [[16,0,0],[15,0,0],[14,13,12]], pos:{x:100, y:100}, players: [{pos:{x:0,y:0},dir:0, burn:0}]},
    {boxes: [[11,0,0],[10,0,0],[9,8,7]], pos:{x:200, y:100}, players: [{pos:{x:0,y:0},dir:3, burn:0}]},
    {boxes: [[6,0,0],[5,0,0],[4,3,2]], pos:{x:100, y:200}, players: [{pos:{x:0,y:0},dir:2, burn:1}]},
    {boxes: [[1,0,0],[2,0,0],[3,4,5]], pos:{x:200, y:200}, players: [{pos:{x:0,y:0},dir:0, burn:1}]}
  ];

  clusterArray.forEach(function (cluster){
    drawCluster(cluster.boxes,cluster.pos, cluster.players);
  });


}

setInterval(draw,10);

</script>

</body>
</html>
