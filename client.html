<script src="/socket.io/socket.io.js"></script>
<canvas id="myCanvas" width="300 px" height="300 px">

</canvas>
<script>
  var canvas = document.getElementById("myCanvas");
  var ctx = canvas.getContext("2d");
  var socket = io('http://localhost');
  socket.on('update', function (rect) {

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.beginPath();
    ctx.rect(rect.x/1000, rect.y/1000, 50, 50);
    ctx.fillStyle = "#FF0000";
    ctx.fill();
    ctx.closePath();
  });


  document.onkeydown = checkKey;

  function checkKey(e) {

      e = e || window.event;

      if (e.keyCode == '38') {
          socket.emit('action', {x:0, y:-1});
      }
      else if (e.keyCode == '40') {
          socket.emit('action', {x:0, y:1});
      }
      else if (e.keyCode == '37') {
          socket.emit('action', {x:-1, y:0});
      }
      else if (e.keyCode == '39') {
          socket.emit('action', {x:1, y:0});
      }

  }
</script>
